<!DOCTYPE html>
<html>
<head>
    <title>Global Remote ADB</title>
    <style>
        body { background: #0f172a; color: white; display: flex; font-family: sans-serif; padding: 20px; gap: 20px; }
        #screen-container { position: relative; border: 4px solid #334155; border-radius: 10px; cursor: crosshair; }
        #screen-img { max-width: 350px; display: block; }
        .panel { flex: 1; }
        #log { background: #000; color: #10b981; padding: 15px; height: 250px; overflow-y: auto; font-family: monospace; border-radius: 8px; }
        input, button { width: 100%; padding: 12px; margin-top: 10px; border-radius: 5px; border: none; font-weight: bold; }
        button { background: #38bdf8; cursor: pointer; }
    </style>
</head>
<body>
    <div id="screen-container">
        <img id="screen-img" src="" onclick="sendTouch(event)">
    </div>
    <div class="panel">
        <h2>Remote Controller</h2>
        <input type="text" id="ip" placeholder="Phone IP">
        <button onclick="toggleStream()">Start/Stop Stream</button>
        <div id="log">--- Logs ---</div>
        <input type="text" id="cmd" placeholder="Shell Command (e.g. input keyevent 3)">
        <button onclick="runCmd()" style="background: #a855f7;">Execute</button>
    </div>

<script>
    const socket = new WebSocket('wss://your-tunnel.trycloudflare.com');
    let streaming = false;

    socket.onmessage = (e) => {
        const res = JSON.parse(e.data);
        if(res.type === 'SCREEN') document.getElementById('screen-img').src = "data:image/png;base64," + res.data;
        if(res.type === 'RESULT') document.getElementById('log').innerText += "\n> " + res.data;
    };

    function toggleStream() {
        streaming = !streaming;
        if(streaming) {
            setInterval(() => { if(streaming) socket.send(JSON.stringify({type:'REQUEST_SCREEN', ip: document.getElementById('ip').value})); }, 1500);
        }
    }

    function sendTouch(e) {
        const img = document.getElementById('screen-img');
        const x = Math.round((e.offsetX / img.clientWidth) * 1080); // ফোনের রেজোলিউশন অনুযায়ী অ্যাডজাস্ট করুন
        const y = Math.round((e.offsetY / img.clientHeight) * 2400); 
        socket.send(JSON.stringify({type: 'TOUCH', ip: document.getElementById('ip').value, x, y}));
    }

    function runCmd() {
        socket.send(JSON.stringify({type: 'COMMAND', ip: document.getElementById('ip').value, cmd: document.getElementById('cmd').value}));
    }
</script>
</body>
</html>
