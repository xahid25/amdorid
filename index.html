<!DOCTYPE html>
<html>
<body>
    <h3>Step 1: Activate Phone via USB</h3>
    <button onclick="init()">Activate & Connect to Linux</button>
    <p id="stat"></p>
    <script src="webadb.js"></script>
    <script>
        async function init() {
            const webusb = await Adb.open("WebUSB");
            const adb = await webusb.connectAdb("host::");
            await adb.tcpip(5555);
            let shell = await adb.shell('ip addr show wlan0 | grep "inet "');
            let response = await shell.receive();
            let out = new TextDecoder().decode(response.data);
            let ip = out.match(/inet\s+(\d+\.\d+\.\d+\.\d+)/)[1];
            
            // লিনাক্স সার্ভারকে জানানো (Cloudflare URL দিন)
            const socket = new WebSocket('wss://your-tunnel.trycloudflare.com');
            socket.onopen = () => {
                socket.send(JSON.stringify({ type: 'REGISTER_PHONE', ip: ip }));
                document.getElementById('stat').innerText = "✅ Activated! IP: " + ip;
            };
        }
    </script>
</body>
</html>
